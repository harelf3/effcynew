{% load static %}

<!DOCTYPE html>
<html>
    
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link href="{% static 'css/knowledge.css' %}" rel="stylesheet">

    <title>Share your Google Sheets</title>
    <style>
        .box {
            display: inline-block;
            width: 25%;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>my dash board</h1>
    <div>
        
        <div class="output"></div>
    </div>
    <script>
        //https://docs.google.com/spreadsheets/d/1XyOZDXtpZcwirD8fRvEoW-_JChetLSUTnqPvjllS4dQ/edit?usp=sharing



    // make it the level before we increment it 
    document.addEventListener("DOMContentLoaded", () => {
        

        const output = document.querySelector('.output');
const url = 'https://docs.google.com/spreadsheets/d/';
const ssid = '1eMNqyPlO8PtoyqXHn1F2h93PbVpN7Y8EDEkyQZCpDhU';
const query1 = `/gviz/tq?`;
const endpoint1 = `${url}${ssid}${query1}`;
fetch(endpoint1)
    .then(res => res.text())
    .then(data => {
        const temp = data.substr(47).slice(0, -2);
        const json = JSON.parse(temp);
        const rows = json.table.rows;
        let business = parseInt(rows[4].c[1].v);
        console.log(business);
        

            let level = business
            document.getElementById("bar").innerHTML = Math.floor(level/10);
            document.getElementById("progress_bar").style.width = document.getElementById("bar").innerHTML*10+"%"            
        })

        });
        
    </script>
    <div class="row">
        <div class="col">    
            <br><br>
            <h5 style="color: #55bcc9;"> level :</h5>
            <h5 style="color: #55bcc9;" id="bar">  41 </h5>
            <div class="progress" style="height: 30px;">
                <div id ="progress_bar"class="progress-bar" role="progressbar" style="width:0%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
              </div>
        </div>        
    </div>
</body>
</html>

